<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VWX5EMQSLM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-VWX5EMQSLM');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Overview of shipping companies ranked by total reported CO₂ emissions from vessels operating in European waters.">
    <meta name="keywords" content="shipping company emissions, MSC CO2, Maersk emissions, CMA CGM pollution, maritime company ranking, shipping corporation CO2, top polluting shipping companies">
    <meta name="author" content="Dirtiest Ships">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://dirtiestships.com/companies.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dirtiestships.com/companies.html">
    <meta property="og:title" content="Shipping Companies Ranked by CO₂ Emissions">
    <meta property="og:description" content="Overview of shipping companies ranked by total reported CO₂ emissions from vessels operating in European waters.">
    <meta property="og:site_name" content="Dirtiest Ships">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://dirtiestships.com/companies.html">
    <meta name="twitter:title" content="Shipping Companies Ranked by CO₂ Emissions">
    <meta name="twitter:description" content="Overview of shipping companies ranked by total reported CO₂ emissions from vessels operating in European waters.">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9641573711172527"
     crossorigin="anonymous"></script>
    <title>Shipping Companies Ranked by CO₂ Emissions | DirtiestShips</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="images/ship-smoke-left.jpg" alt="" class="header-img header-img-left">
            <img src="images/ship-smoke-right.jpg" alt="" class="header-img header-img-right">
            <h1>Dirtiest Ships <span style="font-size: 0.5em; font-weight: normal;">(in Europe)</span></h1>
            <p class="subtitle" id="subtitle">Top 15 Companies by CO2-eq Emissions (2024)</p>
            <nav>
                <div class="year-selector">
                    <select id="year-select">
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                    </select>
                </div>
                <a href="index.html">Ship Rankings</a>
                <a href="chart.html">By Ship Type</a>
                <a href="companies.html" class="active">By Company</a>
                <a href="countries.html">By Country</a>
                <a href="compare.html">Peer Compare</a>
                <a href="rules.html">Regulations</a>
                <a href="FAQ.html">Why?</a>
            </nav>
        </header>

        <div class="chart-container">
            <div class="chart-wrapper">
                <canvas id="chart"></canvas>
            </div>
            <div class="note" id="note">
                <strong>Note:</strong> Companies are consolidated where the same parent company reports under multiple subsidiaries.
                For example, MSC Group includes MSC Shipmanagement Ltd, Mediterranean Shipping Co, and MSC Cruises.
                CMA CGM Group includes CMA Ships and various regional CMA CGM entities.
                Carnival Corporation includes Costa Crociere and Holland America Line.
            </div>
        </div>

        <footer>
            <p>Data source: <a href="https://mrv.emsa.europa.eu/" target="_blank">EU MRV Regulation</a></p>
            <p>This data shows annual CO2 emissions from ships calling at EU/EEA ports.</p>
        </footer>
    </div>

    <script>
        let chart = null;

        function loadData(year) {
            const isNew = year === '2024';
            const co2Label = isNew ? 'CO2-eq' : 'CO2';

            document.getElementById('subtitle').textContent = `Top 15 Companies by ${co2Label} Emissions (${year})`;

            // Only 2024 has company data
            if (year !== '2024') {
                if (chart) {
                    chart.destroy();
                    chart = null;
                }
                document.querySelector('.chart-wrapper').innerHTML =
                    '<p class="loading">Company data is only available for 2024.<br>The 2022 and 2023 datasets do not include company information.</p>';
                document.getElementById('note').style.display = 'none';
                return;
            }

            document.getElementById('note').style.display = 'block';
            document.querySelector('.chart-wrapper').innerHTML = '<canvas id="chart"></canvas>';

            fetch(`json/${year}_companies_top15.json`)
                .then(response => response.json())
                .then(data => {
                    const ctx = document.getElementById('chart').getContext('2d');

                    if (chart) {
                        chart.destroy();
                    }

                    const colors = [
                        '#ff6b6b', '#4ecdc4', '#ffe66d', '#95e1d3', '#f38181',
                        '#aa96da', '#fcbad3', '#a8d8ea', '#ff9a3c', '#1fab89',
                        '#62d2a2', '#9df3c4', '#d7fbe8', '#f9ed69', '#f08a5d'
                    ];

                    chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: data.map(d => d.company),
                            datasets: [{
                                label: `${co2Label} Emissions (million tonnes)`,
                                data: data.map(d => d.co2eq / 1000000),
                                backgroundColor: colors,
                                borderColor: colors,
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            const item = data[context.dataIndex];
                                            return [
                                                `${co2Label}: ${(item.co2eq / 1000000).toFixed(2)} million tonnes`,
                                                `Ships: ${item.count.toLocaleString()}`
                                            ];
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    ticks: {
                                        color: '#888',
                                        maxRotation: 45,
                                        minRotation: 45
                                    },
                                    grid: {
                                        color: 'rgba(255,255,255,0.1)'
                                    }
                                },
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        color: '#888',
                                        callback: function(value) {
                                            return value + ' M';
                                        }
                                    },
                                    grid: {
                                        color: 'rgba(255,255,255,0.1)'
                                    },
                                    title: {
                                        display: true,
                                        text: `${co2Label} (million tonnes)`,
                                        color: '#888'
                                    }
                                }
                            }
                        }
                    });
                })
                .catch(error => {
                    document.querySelector('.chart-wrapper').innerHTML =
                        '<p class="loading">Error loading data.</p>';
                });
        }

        document.getElementById('year-select').addEventListener('change', (e) => {
            loadData(e.target.value);
        });

        loadData('2024');
    </script>
</body>
</html>
